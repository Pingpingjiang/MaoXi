<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>çŒ«ç³»æ€§æ ¼æµ‹è¯• | è§£é”ä½ çš„ä¸“å±çŒ«å’ªäººæ ¼</title>
  <!-- å¼•å…¥å¤–éƒ¨èµ„æº -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  
  <!-- é…ç½®Tailwindè‡ªå®šä¹‰ä¸»é¢˜ -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF9E6D', // æš–æ©™è‰²ä¸»è‰²è°ƒ
            secondary: '#FFD6A5', // æµ…é»„è¾…åŠ©è‰²
            accent: '#FF6B95', // ç²‰è‰²å¼ºè°ƒè‰²
            light: '#FFF9E8', // å¥¶æ²¹ç™½èƒŒæ™¯
            dark: '#5D534A', // æ·±æ£•è‰²æ–‡å­—
          },
          fontFamily: {
            cute: ['"Comic Sans MS"', 'Arial', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- è‡ªå®šä¹‰æ ·å¼ -->
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }
      .rotate-cat {
        transition: transform 0.3s ease;
      }
      .rotate-cat:hover {
        transform: rotate(10deg) scale(1.05);
      }
      .btn-cute {
        @apply bg-primary hover:bg-primary/90 text-white rounded-full py-2 px-6 
               shadow-md hover:shadow-lg transition-all duration-300 
               font-cute text-lg;
      }
      .card-cute {
        @apply bg-white rounded-2xl shadow-xl p-6 border-2 border-secondary/30 
               transform hover:-translate-y-1 transition-all duration-300;
      }
      .btn-back {
        @apply bg-dark/80 hover:bg-dark text-white rounded-full py-2 px-4 
               shadow-md hover:shadow-lg transition-all duration-300 
               font-cute text-base flex items-center gap-2;
      }
      /* åœ†å½¢å›¾ç‰‡æ ·å¼ */
      .cat-img-circle {
        @apply rounded-full object-cover w-48 h-48 border-4 border-secondary overflow-hidden;
      }
      .cat-img-circle-sm {
        @apply rounded-full object-cover w-24 h-24 border-2 border-secondary overflow-hidden;
      }
    }
  </style>
</head>

<body class="bg-light min-h-screen font-cute text-dark overflow-x-hidden">
  <!-- é¡µé¢åŠ è½½åŠ¨ç”» -->
  <div id="loader" class="fixed inset-0 bg-light flex flex-col items-center justify-center z-50">
    <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/ed732d0d28234d04a60dbf08473570ca.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=pEil1B%2BNkyxc2iCNMtxDu9AG%2BiY%3D" alt="çŒ«å’ªåŠ è½½ä¸­" class="cat-img-circle-sm mb-4 rotate-cat">
    <p class="text-xl text-primary animate-pulse">åŠ è½½çŒ«å’ªèƒ½é‡ä¸­...</p>
  </div>

  <!-- ç®¡ç†å‘˜æŒ‰é’® -->
  <button id="adminBtn" class="fixed bottom-6 right-6 bg-accent text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg hover:bg-accent/90 transition-all z-40">
    <i class="fa fa-cog text-xl"></i>
  </button>

  <!-- ç®¡ç†å‘˜ç™»å½•æ¨¡æ€æ¡† -->
  <div id="adminModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="card-cute w-full max-w-md">
      <h2 class="text-2xl text-primary mb-6 text-center">ç®¡ç†å‘˜ç™»å½•</h2>
      <div class="mb-4">
        <label class="block mb-2 text-dark">è´¦å·</label>
        <input type="text" id="adminUser" class="w-full px-4 py-2 border border-secondary rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="è¾“å…¥ç®¡ç†å‘˜è´¦å·">
      </div>
      <div class="mb-6">
        <label class="block mb-2 text-dark">å¯†ç </label>
        <input type="password" id="adminPass" class="w-full px-4 py-2 border border-secondary rounded-lg focus:outline-none focus:ring-2 focus:ring-primary" placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
      </div>
      <div class="flex justify-between">
        <button id="closeAdminModal" class="btn-cute bg-dark hover:bg-dark/80">å–æ¶ˆ</button>
        <button id="adminLoginBtn" class="btn-cute">ç™»å½•</button>
      </div>
    </div>
  </div>

  <!-- ç®¡ç†å‘˜é¢æ¿ -->
  <div id="adminPanel" class="fixed inset-0 bg-light z-50 hidden overflow-auto">
    <div class="container mx-auto px-4 py-8">
      <div class="flex justify-between items-center mb-8">
        <h2 class="text-3xl text-primary font-bold text-shadow">ğŸ± çŒ«ç³»æµ‹è¯•ç®¡ç†é¢æ¿</h2>
        <div class="flex gap-3">
          <!-- è¿”å›ä¸»é¡µé¢æŒ‰é’® -->
          <button id="backToMainFromAdmin" class="btn-back">
            <i class="fa fa-home mr-1"></i>è¿”å›ä¸»é¡µ
          </button>
          <button id="logoutAdmin" class="btn-cute bg-dark hover:bg-dark/80">é€€å‡ºç™»å½•</button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <!-- ç”Ÿæˆæµ‹è¯•ç åŒºåŸŸ -->
        <div class="card-cute">
          <h3 class="text-xl text-accent mb-4">ç”Ÿæˆæµ‹è¯•ç </h3>
          <button id="generateCodeBtn" class="btn-cute mb-6">ç”Ÿæˆæ–°æµ‹è¯•ç </button>
          <div id="newCodeDisplay" class="p-4 bg-secondary/20 rounded-lg min-h-[80px] flex items-center justify-center text-center text-xl font-bold">
            ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ç”Ÿæˆæµ‹è¯•ç 
          </div>
        </div>

        <!-- æµ‹è¯•ç è®°å½•åŒºåŸŸ -->
        <div class="card-cute">
          <h3 class="text-xl text-accent mb-4">æµ‹è¯•ç ä½¿ç”¨è®°å½•</h3>
          <div id="codeRecords" class="max-h-[400px] overflow-auto p-4 bg-secondary/20 rounded-lg">
            <p class="text-center text-gray-500">æš‚æ— è®°å½•</p>
          </div>
        </div>
      </div>

      <!-- æµ‹è¯•ç»“æœè®°å½•åŒºåŸŸ -->
      <div class="card-cute">
        <h3 class="text-xl text-accent mb-4">æµ‹è¯•ç»“æœè®°å½•</h3>
        <div id="resultRecords" class="max-h-[500px] overflow-auto">
          <table class="w-full border-collapse">
            <thead>
              <tr class="bg-secondary/30">
                <th class="p-3 border border-secondary text-left">æµ‹è¯•ç </th>
                <th class="p-3 border border-secondary text-left">æµ‹è¯•æ—¶é—´</th>
                <th class="p-3 border border-secondary text-left">çŒ«ç³»æ€§æ ¼</th>
                <th class="p-3 border border-secondary text-left">æŸ¥çœ‹ç­”æ¡ˆ</th>
              </tr>
            </thead>
            <tbody id="resultTableBody">
              <tr>
                <td colspan="4" class="p-4 text-center text-gray-500">æš‚æ— æµ‹è¯•ç»“æœ</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- æµ‹è¯•ç è¾“å…¥é¡µé¢ -->
  <div id="codeInputPage" class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="card-cute w-full max-w-md">
      <div class="text-center mb-8">
        <!-- å¯çˆ±çŒ«å’ªå¤´åƒ - æ›¿æ¢ä¸ºæŒ‡å®šå›¾ç‰‡å¹¶è®¾ç½®åœ†å½¢ -->
        <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/ed732d0d28234d04a60dbf08473570ca.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=pEil1B%2BNkyxc2iCNMtxDu9AG%2BiY%3D" alt="å¯çˆ±çŒ«å’ª" class="mx-auto mb-4 cat-img-circle-sm rotate-cat">
        <h1 class="text-3xl text-primary font-bold text-shadow">ğŸ± çŒ«ç³»æ€§æ ¼æµ‹è¯•</h1>
        <p class="text-dark/70 mt-2">è¾“å…¥ä¸“å±æµ‹è¯•ç ï¼Œè§£é”ä½ çš„çŒ«å’ªäººæ ¼</p>
      </div>

      <div class="mb-6">
        <label class="block mb-2 text-dark font-medium">æµ‹è¯•ç </label>
        <input type="text" id="testCodeInput" class="w-full px-4 py-3 border-2 border-secondary rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-center text-xl" placeholder="è¯·è¾“å…¥6ä½æµ‹è¯•ç ">
        <p id="codeError" class="text-red-500 text-sm mt-2 text-center hidden">æµ‹è¯•ç æ— æ•ˆ</p>
      </div>

      <button id="startTestBtn" class="btn-cute w-full">å¼€å§‹æµ‹è¯•/æŸ¥çœ‹ç»“æœ</button>
    </div>
  </div>

  <!-- æµ‹è¯•é¢˜ç›®é¡µé¢ -->
  <div id="questionPage" class="min-h-screen flex flex-col items-center justify-center p-4 hidden">
    <div class="card-cute w-full max-w-md">
      <div class="flex justify-between items-center mb-6">
        <!-- è¿”å›ä¸»é¡µé¢æŒ‰é’® -->
        <button id="backToMainFromQuestion" class="btn-back">
          <i class="fa fa-home mr-1"></i>è¿”å›ä¸»é¡µ
        </button>
        <div class="flex items-center gap-4">
          <span id="questionNum" class="bg-secondary/50 px-4 py-1 rounded-full">ç¬¬1é¢˜ / å…±10é¢˜</span>
          <div class="flex gap-2">
            <button id="prevQuestion" class="btn-cute bg-dark/80 hover:bg-dark px-4 py-1 text-sm disabled:opacity-50 disabled:cursor-not-allowed" disabled>ä¸Šä¸€é¢˜</button>
            <button id="nextQuestion" class="btn-cute px-4 py-1 text-sm">ä¸‹ä¸€é¢˜</button>
          </div>
        </div>
      </div>

      <div id="questionContent" class="mb-8 text-center text-xl min-h-[80px] flex items-center justify-center">
        <!-- é¢˜ç›®å†…å®¹ä¼šåŠ¨æ€åŠ è½½ -->
      </div>

      <div id="optionsContainer" class="grid grid-cols-1 gap-4 mb-6">
        <!-- é€‰é¡¹ä¼šåŠ¨æ€åŠ è½½ -->
      </div>
    </div>
  </div>

  <!-- æµ‹è¯•ç»“æœé¡µé¢ -->
  <div id="resultPage" class="min-h-screen flex flex-col items-center justify-center p-4 hidden">
    <div class="card-cute w-full max-w-lg">
      <div id="resultContent" class="text-center">
        <!-- ç»“æœå†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
      </div>

      <div class="flex flex-wrap justify-center gap-4 mt-8">
        <button id="shareWechatBtn" class="btn-cute bg-green-500 hover:bg-green-600">
          <i class="fa fa-weixin mr-2"></i>åˆ†äº«åˆ°å¾®ä¿¡
        </button>
        <button id="shareQQBtn" class="btn-cute bg-blue-500 hover:bg-blue-600">
          <i class="fa fa-qq mr-2"></i>åˆ†äº«åˆ°QQ
        </button>
        <button id="saveImageBtn" class="btn-cute bg-accent hover:bg-accent/90">
          <i class="fa fa-download mr-2"></i>ä¿å­˜å›¾ç‰‡
        </button>
        <!-- è¿”å›ä¸»é¡µé¢æŒ‰é’® -->
        <button id="backToMainFromResult" class="btn-back">
          <i class="fa fa-home mr-1"></i>è¿”å›ä¸»é¡µ
        </button>
      </div>
    </div>
  </div>

  <!-- åˆ†äº«å›¾ç‰‡å¼¹çª— -->
  <div id="shareImageModal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 hidden p-4">
    <div class="bg-white rounded-xl p-2 max-w-md w-full">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl text-primary font-bold">åˆ†äº«ä½ çš„çŒ«ç³»æ€§æ ¼</h3>
        <button id="closeShareModal" class="text-dark hover:text-red-500">
          <i class="fa fa-times text-xl"></i>
        </button>
      </div>
      <div id="shareImageContainer" class="border-2 border-secondary rounded-lg p-2 bg-light">
        <!-- ç”Ÿæˆçš„åˆ†äº«å›¾ç‰‡ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
      </div>
      <p class="text-center text-sm mt-4 text-dark/70">é•¿æŒ‰å›¾ç‰‡ä¿å­˜ï¼Œåˆ†äº«ç»™å¥½å‹</p>
    </div>
  </div>

  <script>
    // å…¨å±€æ•°æ®å­˜å‚¨
    const appData = {
      // åˆ†æ”¯é¢˜åº“ - æ¯ä¸ªé—®é¢˜æ ¹æ®ä¸Šä¸€é¢˜é€‰æ‹©æœ‰ä¸åŒçš„åç»­é—®é¢˜
      branchQuestions: {
        // åˆå§‹é—®é¢˜ï¼ˆç¬¬1é¢˜ï¼‰
        init: {
          id: 1,
          text: "å‘¨æœ«ä¼‘æ¯ï¼Œä½ æ›´æƒ³åšä»€ä¹ˆï¼Ÿ",
          options: [
            { text: "å®…åœ¨å®¶é‡Œï¼Œçœ‹çœ‹å‰§æ’¸æ’¸çŒ«", score: 1, next: "q1_1" }, // åå‘å®…å®¶å‹
            { text: "å‡ºé—¨æ¢ç´¢ï¼Œå’Œæœ‹å‹èšä¼š", score: 10, next: "q1_2" } // åå‘å¤–å‘å‹
          ]
        },
        
        // ç¬¬1é¢˜é€‰1åçš„ç¬¬2é¢˜
        q1_1: {
          id: 2,
          text: "åœ¨å®¶æ—¶ï¼Œä½ æ›´å–œæ¬¢å“ªç§æ”¾æ¾æ–¹å¼ï¼Ÿ",
          options: [
            { text: "èœ·ç¼©åœ¨æ²™å‘ä¸Šï¼Œå®‰é™å‘å‘†", score: 1, next: "q2_1" },
            { text: "åšç‚¹æ‰‹å·¥/çƒ˜ç„™ï¼Œå……å®è‡ªå·±", score: 8, next: "q2_2" }
          ]
        },
        
        // ç¬¬1é¢˜é€‰2åçš„ç¬¬2é¢˜
        q1_2: {
          id: 2,
          text: "å‡ºé—¨èšä¼šï¼Œä½ æ›´å–œæ¬¢å“ªç§åœºåˆï¼Ÿ",
          options: [
            { text: "çƒ­é—¹çš„æ´¾å¯¹ï¼Œè®¤è¯†æ–°æœ‹å‹", score: 10, next: "q2_3" },
            { text: "å®‰é™çš„å’–å•¡é¦†ï¼Œå’Œå¥½å‹èŠå¤©", score: 5, next: "q2_4" }
          ]
        },
        
        // ç¬¬2é¢˜é€‰1åçš„ç¬¬3é¢˜
        q2_1: {
          id: 3,
          text: "ç‹¬å¤„æ—¶ï¼Œçªç„¶æ”¶åˆ°æœ‹å‹çš„é‚€çº¦ï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "å§”å©‰æ‹’ç»ï¼Œæƒ³ç»§ç»­ç‹¬å¤„", score: 1, next: "q3_1" },
            { text: "çŠ¹è±«åç­”åº”ï¼Œä¸æƒ³è¾œè´Ÿæœ‹å‹", score: 4, next: "q3_2" }
          ]
        },
        
        // ç¬¬2é¢˜é€‰2åçš„ç¬¬3é¢˜
        q2_2: {
          id: 3,
          text: "åšæ‰‹å·¥æ—¶é‡åˆ°å›°éš¾ï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "è‡ªå·±æ…¢æ…¢ç¢ç£¨ï¼Œç›´åˆ°åšå¥½", score: 3, next: "q3_3" },
            { text: "ç«‹åˆ»æŸ¥æ•™ç¨‹ï¼Œå¿«é€Ÿè§£å†³é—®é¢˜", score: 7, next: "q3_4" }
          ]
        },
        
        // ç¬¬2é¢˜é€‰3åçš„ç¬¬3é¢˜
        q2_3: {
          id: 3,
          text: "åœ¨æ´¾å¯¹ä¸Šé‡åˆ°ä¸è®¤è¯†çš„äººæ­è®ªï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "çƒ­æƒ…å›åº”ï¼Œè½»æ¾èŠèµ·æ¥", score: 10, next: "q3_5" },
            { text: "ç¤¼è²Œå›åº”ï¼Œç„¶åæ‰¾å€Ÿå£ç¦»å¼€", score: 6, next: "q3_6" }
          ]
        },
        
        // ç¬¬2é¢˜é€‰4åçš„ç¬¬3é¢˜
        q2_4: {
          id: 3,
          text: "å’Œå¥½å‹èŠå¤©ï¼Œæ›´å€¾å‘äºèŠä»€ä¹ˆè¯é¢˜ï¼Ÿ",
          options: [
            { text: "ç”Ÿæ´»çäº‹ï¼Œåˆ†äº«æ—¥å¸¸", score: 5, next: "q3_7" },
            { text: "æ–°å¥‡äº‹ç‰©ï¼Œæ¢è®¨æƒ³æ³•", score: 8, next: "q3_8" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰1åçš„ç¬¬4é¢˜
        q3_1: {
          id: 4,
          text: "ä½ æ›´å–œæ¬¢å“ªç§ç±»å‹çš„çŒ«å’ªï¼Ÿ",
          options: [
            { text: "å®‰é™çš„è‹±çŸ­ï¼Œé»˜é»˜é™ªä¼´", score: 1, next: "q4_1" },
            { text: "æ¸©æŸ”çš„å¸ƒå¶ï¼Œç²˜äººå¯çˆ±", score: 3, next: "q4_2" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰2åçš„ç¬¬4é¢˜
        q3_2: {
          id: 4,
          text: "ç­”åº”æœ‹å‹ååˆåæ‚”ï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "ç¡¬ç€å¤´çš®å»ï¼Œä¸æƒ³å¤±ä¿¡", score: 4, next: "q4_3" },
            { text: "å¦è¯šè¯´æ˜ï¼Œå¸Œæœ›æœ‹å‹ç†è§£", score: 6, next: "q4_4" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰3åçš„ç¬¬4é¢˜
        q3_3: {
          id: 4,
          text: "å®Œæˆæ‰‹å·¥ä½œå“åï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "è‡ªå·±æ¬£èµï¼Œçè—èµ·æ¥", score: 2, next: "q4_5" },
            { text: "åˆ†äº«ç»™æœ‹å‹ï¼Œå¯»æ±‚èµç¾", score: 7, next: "q4_6" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰4åçš„ç¬¬4é¢˜
        q3_4: {
          id: 4,
          text: "å­¦ä¼šæ–°æŠ€èƒ½åï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "åå¤ç»ƒä¹ ï¼Œåšåˆ°å®Œç¾", score: 5, next: "q4_7" },
            { text: "å°è¯•åˆ›æ–°ï¼ŒåŠ å…¥è‡ªå·±æƒ³æ³•", score: 9, next: "q4_8" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰5åçš„ç¬¬4é¢˜
        q3_5: {
          id: 4,
          text: "è®¤è¯†æ–°æœ‹å‹åï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "ä¸»åŠ¨æ·»åŠ è”ç³»æ–¹å¼ï¼Œä¿æŒè”ç³»", score: 10, next: "q4_9" },
            { text: "éšç¼˜ï¼Œçœ‹å¯¹æ–¹æ˜¯å¦ä¸»åŠ¨", score: 7, next: "q4_10" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰6åçš„ç¬¬4é¢˜
        q3_6: {
          id: 4,
          text: "é‡åˆ°ä¸æ„Ÿå…´è¶£çš„è¯é¢˜ï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "ç¤¼è²Œå€¾å¬ï¼Œå¶å°”å›åº”", score: 5, next: "q4_11" },
            { text: "å·§å¦™è½¬ç§»è¯é¢˜ï¼ŒèŠæ„Ÿå…´è¶£çš„", score: 8, next: "q4_12" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰7åçš„ç¬¬4é¢˜
        q3_7: {
          id: 4,
          text: "æœ‹å‹å‘ä½ å€¾è¯‰çƒ¦æ¼ï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "è€å¿ƒå€¾å¬ï¼Œç»™äºˆå®‰æ…°", score: 4, next: "q4_13" },
            { text: "ç§¯æå»ºè®®ï¼Œå¸®TAè§£å†³é—®é¢˜", score: 7, next: "q4_14" }
          ]
        },
        
        // ç¬¬3é¢˜é€‰8åçš„ç¬¬4é¢˜
        q3_8: {
          id: 4,
          text: "å¬åˆ°æ–°å¥‡çš„è§‚ç‚¹ï¼Œä½ ä¼šï¼Ÿ",
          options: [
            { text: "è®¤çœŸæ€è€ƒï¼Œè¡¨è¾¾è‡ªå·±çœ‹æ³•", score: 8, next: "q4_15" },
            { text: "å¥½å¥‡è¿½é—®ï¼Œæ·±å…¥äº†è§£", score: 9, next: "q4_16" }
          ]
        },
        
        // ç¬¬4é¢˜é€šç”¨åç»­ï¼ˆç®€åŒ–å±•ç¤ºï¼Œå®é™…å¯æ‰©å±•æ›´å¤šåˆ†æ”¯ï¼‰
        q4_1: { id: 5, text: "ä½ è§‰å¾—è‡ªå·±çš„æ€§æ ¼æ›´åƒï¼Ÿ", options: [{ text: "æ…µæ‡’çš„åŠ è²çŒ«", score: 1, next: "q5_1" }, { text: "å‚²å¨‡çš„æš¹ç½—çŒ«", score: 4, next: "q5_2" }] },
        q4_2: { id: 5, text: "è¢«äººæ‰“æ‰°ä¼‘æ¯æ—¶ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "æ¸©æŸ”æé†’", score: 3, next: "q5_3" }, { text: "æ˜æ˜¾ä¸æ‚¦", score: 5, next: "q5_4" }] },
        q4_3: { id: 5, text: "è¿èƒŒè‡ªå·±å¿ƒæ„åšäº‹ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "é»˜é»˜æ¥å—", score: 4, next: "q5_5" }, { text: "äº‹åæŠ±æ€¨", score: 6, next: "q5_6" }] },
        q4_4: { id: 5, text: "å¦è¯šè¡¨è¾¾æƒ³æ³•åï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "æ‹…å¿ƒå¯¹æ–¹ç”Ÿæ°”", score: 5, next: "q5_7" }, { text: "è§‰å¾—è½»æ¾è‡ªåœ¨", score: 7, next: "q5_8" }] },
        q4_5: { id: 5, text: "è‡ªå·±çš„ä½œå“è¢«æ‰¹è¯„ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "éš¾è¿‡ä½†ä¸åé©³", score: 2, next: "q5_9" }, { text: "æ®ç†åŠ›äº‰", score: 6, next: "q5_10" }] },
        q4_6: { id: 6, text: "å¾—åˆ°èµç¾åï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "å®³ç¾ä½†å¼€å¿ƒ", score: 7, next: "q5_11" }, { text: "æ¬£ç„¶æ¥å—å¹¶æ„Ÿè°¢", score: 8, next: "q5_12" }] },
        q4_7: { id: 5, text: "ç»ƒä¹ è¿‡ç¨‹ä¸­åå¤å¤±è´¥ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "åšæŒä¸æ‡ˆ", score: 5, next: "q5_13" }, { text: "æš‚æ—¶æ”¾å¼ƒ", score: 4, next: "q5_14" }] },
        q4_8: { id: 5, text: "åˆ›æ–°å°è¯•å¤±è´¥ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "æ€»ç»“ç»éªŒ", score: 9, next: "q5_15" }, { text: "æ¢ä¸ªæ€è·¯", score: 10, next: "q5_16" }] },
        q4_9: { id: 5, text: "æ–°æœ‹å‹å¾ˆä¹…ä¸è”ç³»ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "ä¸»åŠ¨é—®å€™", score: 10, next: "q5_17" }, { text: "éšç¼˜ï¼Œç­‰å¯¹æ–¹è”ç³»", score: 7, next: "q5_18" }] },
        q4_10: { id: 5, text: "æœŸå¾…åˆ«äººä¸»åŠ¨ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "é»˜é»˜ç­‰å¾…", score: 7, next: "q5_19" }, { text: "æš—ç¤ºå¯¹æ–¹", score: 8, next: "q5_20" }] },
        q4_11: { id: 5, text: "è¢«è¿«å¬ä¸æ„Ÿå…´è¶£çš„è¯é¢˜ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "å¼ºè£…æ„Ÿå…´è¶£", score: 5, next: "q5_21" }, { text: "èµ°ç¥æ”¾ç©º", score: 4, next: "q5_22" }] },
        q4_12: { id: 5, text: "è½¬ç§»è¯é¢˜æˆåŠŸï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "æš—è‡ªå¾—æ„", score: 8, next: "q5_23" }, { text: "è‡ªç„¶èŠä¸‹å»", score: 9, next: "q5_24" }] },
        q4_13: { id: 5, text: "å®‰æ…°åˆ«äººåï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "å¸Œæœ›TAå¿ƒæƒ…å˜å¥½", score: 4, next: "q5_25" }, { text: "è§‰å¾—è‡ªå·±å¸®åˆ°äº†TA", score: 6, next: "q5_26" }] },
        q4_14: { id: 5, text: "ä½ çš„å»ºè®®è¢«é‡‡çº³ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "æ„Ÿåˆ°è‡ªè±ª", score: 7, next: "q5_27" }, { text: "è§‰å¾—ç†æ‰€å½“ç„¶", score: 8, next: "q5_28" }] },
        q4_15: { id: 5, text: "è§‚ç‚¹è¢«åé©³ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "ç†æ€§è®¨è®º", score: 8, next: "q5_29" }, { text: "åšæŒå·±è§", score: 9, next: "q5_30" }] },
        q4_16: { id: 5, text: "æ·±å…¥äº†è§£åå‘ç°ä¸è®¤åŒï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "å°Šé‡å·®å¼‚", score: 9, next: "q5_31" }, { text: "è¡¨è¾¾ä¸åŒçœ‹æ³•", score: 10, next: "q5_32" }] },
        
        // ç¬¬5-9é¢˜ï¼ˆç®€åŒ–åˆ†æ”¯ï¼Œä¿è¯æœ€ç»ˆéƒ½èƒ½åˆ°ç¬¬10é¢˜ï¼‰
        q5_1: { id: 6, text: "ä½ æ›´å–œæ¬¢ä»€ä¹ˆé¢œè‰²çš„çŒ«ï¼Ÿ", options: [{ text: "ç°è‰²ç³»", score: 1, next: "q6_1" }, { text: "ç™½è‰²ç³»", score: 2, next: "q6_1" }] },
        q5_2: { id: 6, text: "å‚²å¨‡çš„ä½ ï¼Œä¼šä¸»åŠ¨é“æ­‰å—ï¼Ÿ", options: [{ text: "ç»ä¸ä¸»åŠ¨", score: 4, next: "q6_1" }, { text: "çœ‹æƒ…å†µ", score: 5, next: "q6_1" }] },
        q5_3: { id: 6, text: "æ¸©æŸ”çš„ä½ ï¼Œæœ‰åº•çº¿å—ï¼Ÿ", options: [{ text: "å‡ ä¹æ²¡æœ‰", score: 3, next: "q6_1" }, { text: "å½“ç„¶æœ‰", score: 4, next: "q6_1" }] },
        q5_4: { id: 6, text: "è¡¨è¾¾ä¸æ‚¦åï¼Œä½ ä¼šåæ‚”å—ï¼Ÿ", options: [{ text: "ç»å¸¸åæ‚”", score: 5, next: "q6_1" }, { text: "ä»ä¸åæ‚”", score: 6, next: "q6_1" }] },
        q5_5: { id: 6, text: "é»˜é»˜æ¥å—çš„ä½ ï¼Œä¼šç§¯ç´¯æ€¨æ°”å—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 4, next: "q6_1" }, { text: "ä¸ä¼š", score: 5, next: "q6_1" }] },
        q5_6: { id: 6, text: "æŠ±æ€¨åï¼Œä½ ä¼šè§‰å¾—èˆ’æœå—ï¼Ÿ", options: [{ text: "æš‚æ—¶èˆ’æœ", score: 6, next: "q6_1" }, { text: "æ›´ä¸èˆ’æœ", score: 5, next: "q6_1" }] },
        q5_7: { id: 6, text: "æ‹…å¿ƒå¯¹æ–¹ç”Ÿæ°”ï¼Œä½ ä¼šï¼Ÿ", options: [{ text: "ä¸»åŠ¨ç¤ºå¥½", score: 5, next: "q6_1" }, { text: "ä¿æŒè·ç¦»", score: 4, next: "q6_1" }] },
        q5_8: { id: 6, text: "è½»æ¾è‡ªåœ¨çš„ä½ ï¼Œä¼šæ›´å¦è¯šå—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 7, next: "q6_1" }, { text: "çœ‹å¯¹è°", score: 6, next: "q6_1" }] },
        q5_9: { id: 6, text: "éš¾è¿‡çš„ä½ ï¼Œä¼šè‡ªæˆ‘æ€€ç–‘å—ï¼Ÿ", options: [{ text: "ç»å¸¸", score: 2, next: "q6_1" }, { text: "å¶å°”", score: 3, next: "q6_1" }] },
        q5_10: { id: 6, text: "æ®ç†åŠ›äº‰çš„ä½ ï¼Œä¼šä¼¤äººå—ï¼Ÿ", options: [{ text: "ä¸å°å¿ƒä¼š", score: 6, next: "q6_1" }, { text: "ä¸ä¼š", score: 7, next: "q6_1" }] },
        q5_11: { id: 6, text: "å®³ç¾çš„ä½ ï¼Œå–œæ¬¢è¢«å…³æ³¨å—ï¼Ÿ", options: [{ text: "ä¸å–œæ¬¢", score: 7, next: "q6_1" }, { text: "å·å·å–œæ¬¢", score: 8, next: "q6_1" }] },
        q5_12: { id: 6, text: "å¦ç„¶çš„ä½ ï¼Œä¼šéª„å‚²å—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 8, next: "q6_1" }, { text: "ä¸ä¼š", score: 7, next: "q6_1" }] },
        q5_13: { id: 6, text: "åšæŒä¸æ‡ˆçš„ä½ ï¼Œä¼šå›ºæ‰§å—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 5, next: "q6_1" }, { text: "æœ‰éŸ§æ€§", score: 6, next: "q6_1" }] },
        q5_14: { id: 6, text: "æš‚æ—¶æ”¾å¼ƒçš„ä½ ï¼Œä¼šæ”¾å¼ƒå—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 4, next: "q6_1" }, { text: "åªæ˜¯æš‚åœ", score: 5, next: "q6_1" }] },
        q5_15: { id: 6, text: "æ€»ç»“ç»éªŒçš„ä½ ï¼Œä¼šè¿›æ­¥å—ï¼Ÿ", options: [{ text: "ç¨³æ­¥è¿›æ­¥", score: 9, next: "q6_1" }, { text: "ä¸ä¸€å®š", score: 8, next: "q6_1" }] },
        q5_16: { id: 6, text: "æ¢æ€è·¯çš„ä½ ï¼Œä¼šæˆåŠŸå—ï¼Ÿ", options: [{ text: "å¤§æ¦‚ç‡ä¼š", score: 10, next: "q6_1" }, { text: "çœ‹è¿æ°”", score: 9, next: "q6_1" }] },
        q5_17: { id: 6, text: "ä¸»åŠ¨é—®å€™çš„ä½ ï¼Œæ€•è¢«å†·è½å—ï¼Ÿ", options: [{ text: "ä¸æ€•", score: 10, next: "q6_1" }, { text: "æœ‰ç‚¹æ€•", score: 9, next: "q6_1" }] },
        q5_18: { id: 6, text: "éšç¼˜çš„ä½ ï¼Œé‡æ„Ÿæƒ…å—ï¼Ÿ", options: [{ text: "å¾ˆé‡", score: 7, next: "q6_1" }, { text: "ä¸€èˆ¬", score: 8, next: "q6_1" }] },
        q5_19: { id: 6, text: "é»˜é»˜ç­‰å¾…çš„ä½ ï¼Œä¼šå¤±æœ›å—ï¼Ÿ", options: [{ text: "ç»å¸¸", score: 7, next: "q6_1" }, { text: "å¶å°”", score: 8, next: "q6_1" }] },
        q5_20: { id: 6, text: "æš—ç¤ºçš„ä½ ï¼Œå¸Œæœ›è¢«ç†è§£å—ï¼Ÿ", options: [{ text: "éå¸¸å¸Œæœ›", score: 8, next: "q6_1" }, { text: "é¡ºå…¶è‡ªç„¶", score: 7, next: "q6_1" }] },
        q5_21: { id: 6, text: "å¼ºè£…æ„Ÿå…´è¶£çš„ä½ ï¼Œç´¯å—ï¼Ÿ", options: [{ text: "å¾ˆç´¯", score: 5, next: "q6_1" }, { text: "è¿˜å¥½", score: 4, next: "q6_1" }] },
        q5_22: { id: 6, text: "èµ°ç¥çš„ä½ ï¼Œä¼šè¢«å‘ç°å—ï¼Ÿ", options: [{ text: "ç»å¸¸", score: 4, next: "q6_1" }, { text: "å¾ˆå°‘", score: 5, next: "q6_1" }] },
        q5_23: { id: 6, text: "å¾—æ„çš„ä½ ï¼Œä¼šè¡¨ç°å‡ºæ¥å—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 8, next: "q6_1" }, { text: "ä¸ä¼š", score: 7, next: "q6_1" }] },
        q5_24: { id: 6, text: "è‡ªç„¶èŠå¤©çš„ä½ ï¼Œäº«å—è¿‡ç¨‹å—ï¼Ÿ", options: [{ text: "éå¸¸äº«å—", score: 9, next: "q6_1" }, { text: "è¿˜å¯ä»¥", score: 8, next: "q6_1" }] },
        q5_25: { id: 6, text: "å–„è‰¯çš„ä½ ï¼Œå®¹æ˜“å¿ƒè½¯å—ï¼Ÿ", options: [{ text: "éå¸¸å®¹æ˜“", score: 4, next: "q6_1" }, { text: "çœ‹æƒ…å†µ", score: 5, next: "q6_1" }] },
        q5_26: { id: 6, text: "æœ‰æˆå°±æ„Ÿçš„ä½ ï¼Œä¼šå¸®åŠ©æ›´å¤šäººå—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 6, next: "q6_1" }, { text: "çœ‹ç²¾åŠ›", score: 5, next: "q6_1" }] },
        q5_27: { id: 6, text: "è‡ªè±ªçš„ä½ ï¼Œä¼šé£˜å—ï¼Ÿ", options: [{ text: "ä¼šä¸€ç‚¹", score: 7, next: "q6_1" }, { text: "ä¸ä¼š", score: 8, next: "q6_1" }] },
        q5_28: { id: 6, text: "æ·¡å®šçš„ä½ ï¼Œè‡ªä¿¡å—ï¼Ÿ", options: [{ text: "éå¸¸è‡ªä¿¡", score: 8, next: "q6_1" }, { text: "ä¸€èˆ¬", score: 7, next: "q6_1" }] },
        q5_29: { id: 6, text: "ç†æ€§çš„ä½ ï¼Œä¼šå¦¥åå—ï¼Ÿ", options: [{ text: "ä¼šçš„", score: 8, next: "q6_1" }, { text: "çœ‹æƒ…å†µ", score: 9, next: "q6_1" }] },
        q5_30: { id: 6, text: "åšæŒçš„ä½ ï¼Œä¼šå˜é€šå—ï¼Ÿ", options: [{ text: "å¾ˆéš¾", score: 9, next: "q6_1" }, { text: "ä¼šçš„", score: 8, next: "q6_1" }] },
        q5_31: { id: 6, text: "å°Šé‡å·®å¼‚çš„ä½ ï¼ŒåŒ…å®¹å—ï¼Ÿ", options: [{ text: "éå¸¸åŒ…å®¹", score: 9, next: "q6_1" }, { text: "ä¸€èˆ¬", score: 8, next: "q6_1" }] },
        q5_32: { id: 6, text: "è¡¨è¾¾çœ‹æ³•çš„ä½ ï¼Œæ€•å†²çªå—ï¼Ÿ", options: [{ text: "ä¸æ€•", score: 10, next: "q6_1" }, { text: "æœ‰ç‚¹æ€•", score: 9, next: "q6_1" }] },
        
        // ç¬¬6-9é¢˜ç»Ÿä¸€åˆ†æ”¯åˆ°ç¬¬10é¢˜
        q6_1: { id: 7, text: "ä½ è§‰å¾—çŒ«å’ªæœ€å¯çˆ±çš„åœ°æ–¹æ˜¯ï¼Ÿ", options: [{ text: "è½¯ä¹ä¹çš„è‚‰å«", score: 1, next: "q7_1" }, { text: "çµæ´»çš„å°¾å·´", score: 10, next: "q7_1" }] },
        q7_1: { id: 8, text: "å…»çŒ«å’ªä½ ä¼šé€‰æ‹©ï¼Ÿ", options: [{ text: "ä»å°å…»åˆ°å¤§", score: 1, next: "q8_1" }, { text: "é¢†å…»æˆå¹´çŒ«", score: 10, next: "q8_1" }] },
        q8_1: { id: 9, text: "çŒ«å’ªçŠ¯é”™ä½ ä¼šï¼Ÿ", options: [{ text: "æ¸©æŸ”æ•™è‚²", score: 1, next: "q9_1" }, { text: "é€‚å½“æƒ©ç½š", score: 10, next: "q9_1" }] },
        q9_1: { id: 10, text: "å¦‚æœå¯ä»¥å˜æˆçŒ«ï¼Œä½ æƒ³åšï¼Ÿ", options: [{ text: "æ…µæ‡’çš„å®¶çŒ«", score: 1, next: "end" }, { text: "è‡ªç”±çš„é‡çŒ«", score: 10, next: "end" }] },
        
        // ç»“æŸæ ‡è®°
        end: { id: 10, text: "æµ‹è¯•å®Œæˆ", options: [] }
      },
      
      // 10ç§çŒ«ç³»æ€§æ ¼ç±»å‹ - æ›¿æ¢ä¸ºæŒ‡å®šå›¾ç‰‡URLå¹¶è®¾ç½®åœ†å½¢æ˜¾ç¤º
      catTypes: [
        { 
          min: 10, max: 18, 
          name: "æ…µæ‡’å®…çŒ«", 
          desc: "ä½ å°±åƒä¸€åªæ…µæ‡’çš„å®…çŒ«ï¼Œå–œæ¬¢èˆ’é€‚å®‰é€¸çš„ç”Ÿæ´»ï¼Œäº«å—ç‹¬å¤„çš„æ—¶å…‰ï¼Œå¯¹ç†Ÿæ‚‰çš„ç¯å¢ƒæœ‰å¼ºçƒˆçš„å½’å±æ„Ÿã€‚ä½ æ¸©æŸ”åˆæ•æ„Ÿï¼Œåªå¯¹äº²è¿‘çš„äººå±•éœ²æŸ”è½¯çš„ä¸€é¢ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/ed732d0d28234d04a60dbf08473570ca.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=pEil1B%2BNkyxc2iCNMtxDu9AG%2BiY%3D" 
        },
        { 
          min: 19, max: 27, 
          name: "å‚²å¨‡ç³ç‘çŒ«", 
          desc: "ä½ æ˜¯å…¸å‹çš„å‚²å¨‡ç³ç‘çŒ«ï¼Œå¤–è¡¨é«˜å†·å†…å¿ƒæŸ”è½¯ï¼Œå˜´ä¸Šè¯´ç€ä¸è¦ï¼Œèº«ä½“å´å¾ˆè¯šå®ã€‚ä½ æœ‰è‡ªå·±çš„å°è„¾æ°”ï¼Œä½†ä¹Ÿä¼šé»˜é»˜å…³å¿ƒèº«è¾¹çš„äººï¼Œæ˜¯ä¸ªå¯çˆ±çš„çŸ›ç›¾ä½“ã€‚", 
          img: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/77e61581ce8944a897b6b3a660c04dd1.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=uATX4Zou7xVPYZBGspGr1KQva%2FE%3D" 
        },
        { 
          min: 28, max: 36, 
          name: "æ¸©æŸ”å¸ƒå¶çŒ«", 
          desc: "ä½ å°±åƒæ¸©æŸ”çš„å¸ƒå¶çŒ«ï¼Œæ€§æ ¼è½¯ç³¯åˆç²˜äººï¼Œæ€»æ˜¯èƒ½è½»æ˜“è·å¾—ä»–äººçš„å–œçˆ±ã€‚ä½ å–„è§£äººæ„ï¼Œæ„¿æ„å€¾å¬ä»–äººçš„çƒ¦æ¼ï¼Œæ˜¯èº«è¾¹äººçš„æš–å¿ƒå°æ£‰è¢„ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/1a726fb4531848d5b1b3befc0fa44098.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=wm%2BQTxPtzJ8Ce9oQPtp84sJ9VqY%3D" 
        },
        { 
          min: 37, max: 45, 
          name: "æ´»æ³¼æ©˜çŒ«", 
          desc: "ä½ å°±åƒä¸€åªæ´»æ³¼çš„å¤§æ©˜çŒ«ï¼Œä¹è§‚å¼€æœ—ï¼Œå¯¹ç”Ÿæ´»å……æ»¡çƒ­æƒ…ï¼Œèµ°åˆ°å“ªé‡Œéƒ½æ˜¯ç„¦ç‚¹ã€‚ä½ è´ªåƒåˆè´ªç©ï¼Œèº«è¾¹çš„äººéƒ½å–œæ¬¢å’Œä½ ç›¸å¤„ï¼Œæ˜¯å¤§å®¶çš„å¼€å¿ƒæœã€‚", 
          img: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/3ec73ca9dc0344dda9225eb382e6414c.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=F2hB5VrkmNyHBNvx5xiuiekqDKY%3D" 
        },
        { 
          min: 46, max: 54, 
          name: "å¥½å¥‡è‹±çŸ­çŒ«", 
          desc: "ä½ æ˜¯å……æ»¡å¥½å¥‡å¿ƒçš„è‹±çŸ­çŒ«ï¼Œçœ‹ä¼¼æ·¡å®šå®åˆ™å¯¹ä¸€åˆ‡éƒ½å……æ»¡æ¢ç´¢æ¬²ã€‚ä½ ç¨³é‡åˆèªæ˜ï¼Œé‡åˆ°äº‹æƒ…æ€»èƒ½å†·é™åˆ†æï¼Œæ˜¯ä¸ªå¯é çš„å°ä¼™ä¼´ã€‚", 
          img: "https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/ffc67f85f71c47b1b9648d4ddc84ef37.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=r%2FZWRvmCanw8QlZtzG7eIpedlSM%3D" 
        },
        { 
          min: 55, max: 63, 
          name: "ç²˜äººåŠ è²çŒ«", 
          desc: "ä½ å°±åƒç²˜äººçš„åŠ è²çŒ«ï¼Œå–œæ¬¢å’Œäº²è¿‘çš„äººè…»åœ¨ä¸€èµ·ï¼Œéœ€è¦æ»¡æ»¡çš„å®‰å…¨æ„Ÿã€‚ä½ æ€§æ ¼æ¸©é¡ºï¼Œä¸å–œæ¬¢å†²çªï¼Œåªæƒ³è¢«æ¸©æŸ”ä»¥å¾…ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/3c5bb37f05f84e2a963a0a830895f19a.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=TYKu3S4YrbczseCxvaVxSuZQZu4%3D" 
        },
        { 
          min: 64, max: 72, 
          name: "ç‹¬ç«‹æš¹ç½—çŒ«", 
          desc: "ä½ æ˜¯ç‹¬ç«‹çš„æš¹ç½—çŒ«ï¼Œæœ‰è‡ªå·±çš„æƒ³æ³•å’ŒåšæŒï¼Œä¸è½»æ˜“ä¾èµ–ä»–äººã€‚ä½ èªæ˜åˆå‚²å¨‡ï¼Œè™½ç„¶çœ‹èµ·æ¥é«˜å†·ï¼Œä½†è®¤å®šçš„æœ‹å‹ä¼šçœŸå¿ƒç›¸å¾…ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/e099d0d6e7a3408a8dbe00a59c565a46.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=2iva1WeG07wIRa0PTS4%2Bm2%2B%2Fx6o%3D" 
        },
        { 
          min: 73, max: 81, 
          name: "è°ƒçš®ç¾çŸ­çŒ«", 
          desc: "ä½ å°±åƒè°ƒçš®çš„ç¾çŸ­çŒ«ï¼Œç²¾åŠ›å……æ²›ï¼Œå–œæ¬¢æç‚¹å°æ¶ä½œå‰§ã€‚ä½ æ´»æ³¼å¥½åŠ¨ï¼Œæ€»èƒ½ç»™èº«è¾¹çš„äººå¸¦æ¥æ¬¢ä¹ï¼Œæ˜¯æ°”æ°›çš„åˆ¶é€ è€…ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/2194e2033fff4f6ab3151f848ac590fb.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=yvGw%2F4bzdeJ1qvjpMy8YjDXvCNc%3D" 
        },
        { 
          min: 82, max: 90, 
          name: "ä¼˜é›…æ³¢æ–¯çŒ«", 
          desc: "ä½ æ˜¯ä¼˜é›…çš„æ³¢æ–¯çŒ«ï¼Œæ³¨é‡ç”Ÿæ´»å“è´¨ï¼Œæœ‰è‡ªå·±çš„å°è®²ç©¶ã€‚ä½ æ°”è´¨ç‹¬ç‰¹ï¼Œä¸æ…Œä¸å¿™ï¼Œæ€»èƒ½ä¿æŒä»å®¹ä¸è¿«çš„å§¿æ€ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/5d89c2dd42f8411a907e62fa3ed17059.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=klb7SW%2B%2FzivstTOnz6HqznPe1qE%3D" 
        },
        { 
          min: 91, max: 100, 
          name: "å…ƒæ°”æ›¼åŸºåº·", 
          desc: "ä½ å°±åƒå…ƒæ°”æ»¡æ»¡çš„æ›¼åŸºåº·çŒ«ï¼Œæ°¸è¿œå……æ»¡æ´»åŠ›ï¼Œå¯¹ç”Ÿæ´»æŠ±æœ‰æ— é™çƒ­æƒ…ã€‚ä½ ä¹è§‚ç§¯æï¼Œä»¿ä½›æœ‰ç”¨ä¸å®Œçš„ç²¾åŠ›ï¼Œæ˜¯èº«è¾¹äººçš„å°å¤ªé˜³ã€‚", 
          img: "https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/99d27ab44eb7454a99f3f3b0ac92b283.png~tplv-a9rns2rl98-image.png?rcl=20251205144604EDD7F9E14A7AD58E8C1B&rk3s=8e244e95&rrcfp=dafada99&x-expires=2081141165&x-signature=2h0zP3hRAw8jKPYYLMiAUVT59bI%3D" 
        }
      ],
      
      // ç³»ç»Ÿæ•°æ®
      validCodes: [], // æœ‰æ•ˆæµ‹è¯•ç 
      usedCodes: [],  // å·²ä½¿ç”¨æµ‹è¯•ç 
      tempUsedCodes: [], // ä¸´æ—¶ä½¿ç”¨çš„æµ‹è¯•ç 
      testResults: [], // æµ‹è¯•ç»“æœè®°å½•
      currentCode: "", // å½“å‰ä½¿ç”¨çš„æµ‹è¯•ç 
      currentQuestionKey: "init", // å½“å‰é—®é¢˜keyï¼ˆåˆ†æ”¯æ ‡è¯†ï¼‰
      questionPath: [], // ç­”é¢˜è·¯å¾„è®°å½•
      userAnswers: [], // ç”¨æˆ·ç­”æ¡ˆ
      totalScore: 0, // åˆ†æ•°åå·®
      adminLoggedIn: false // ç®¡ç†å‘˜æ˜¯å¦ç™»å½•
    };

    // DOMåŠ è½½å®Œæˆåæ‰§è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
      // éšè—åŠ è½½åŠ¨ç”»
      setTimeout(() => {
        document.getElementById('loader').classList.add('opacity-0');
        setTimeout(() => {
          document.getElementById('loader').style.display = 'none';
        }, 300);
      }, 800);

      // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
      initEventListeners();
    });

    // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
    function initEventListeners() {
      // ç®¡ç†å‘˜æŒ‰é’®
      document.getElementById('adminBtn').addEventListener('click', openAdminModal);
      
      // ç®¡ç†å‘˜æ¨¡æ€æ¡†
      document.getElementById('closeAdminModal').addEventListener('click', closeAdminModal);
      document.getElementById('adminLoginBtn').addEventListener('click', adminLogin);
      
      // ç®¡ç†å‘˜é¢æ¿
      document.getElementById('logoutAdmin').addEventListener('click', adminLogout);
      document.getElementById('generateCodeBtn').addEventListener('click', generateTestCode);
      document.getElementById('backToMainFromAdmin').addEventListener('click', function() {
        document.getElementById('adminPanel').classList.add('hidden');
        document.getElementById('codeInputPage').classList.remove('hidden');
      });
      
      // é¢˜ç›®é¡µé¢è¿”å›ä¸»é¡µé¢
      document.getElementById('backToMainFromQuestion').addEventListener('click', function() {
        document.getElementById('questionPage').classList.add('hidden');
        document.getElementById('codeInputPage').classList.remove('hidden');
        document.getElementById('testCodeInput').value = '';
      });
      
      // ç»“æœé¡µé¢è¿”å›ä¸»é¡µé¢
      document.getElementById('backToMainFromResult').addEventListener('click', function() {
        document.getElementById('resultPage').classList.add('hidden');
        document.getElementById('codeInputPage').classList.remove('hidden');
      });
      
      // æµ‹è¯•ç è¾“å…¥é¡µé¢
      document.getElementById('startTestBtn').addEventListener('click', validateTestCode);
      
      // é¢˜ç›®é¡µé¢
      document.getElementById('prevQuestion').addEventListener('click', goToPrevQuestion);
      document.getElementById('nextQuestion').addEventListener('click', goToNextQuestion);
      
      // ç»“æœé¡µé¢
      document.getElementById('shareWechatBtn').addEventListener('click', () => shareResult('wechat'));
      document.getElementById('shareQQBtn').addEventListener('click', () => shareResult('qq'));
      document.getElementById('saveImageBtn').addEventListener('click', saveResultImage);
      document.getElementById('closeShareModal').addEventListener('click', closeShareModal);
    }

    // æ‰“å¼€ç®¡ç†å‘˜ç™»å½•æ¨¡æ€æ¡†
    function openAdminModal() {
      document.getElementById('adminModal').classList.remove('hidden');
    }

    // å…³é—­ç®¡ç†å‘˜ç™»å½•æ¨¡æ€æ¡†
    function closeAdminModal() {
      document.getElementById('adminModal').classList.add('hidden');
      document.getElementById('adminUser').value = '';
      document.getElementById('adminPass').value = '';
      document.getElementById('codeError').classList.add('hidden');
    }

    // ç®¡ç†å‘˜ç™»å½•
    function adminLogin() {
      const username = document.getElementById('adminUser').value;
      const password = document.getElementById('adminPass').value;
      
      if (username === 'MXCesi2025' && password === 'Cesi') {
        appData.adminLoggedIn = true;
        closeAdminModal();
        document.getElementById('adminPanel').classList.remove('hidden');
        document.getElementById('codeInputPage').classList.add('hidden');
        document.getElementById('questionPage').classList.add('hidden');
        document.getElementById('resultPage').classList.add('hidden');
        updateCodeRecords();
        updateResultRecords();
      } else {
        alert('è´¦å·æˆ–å¯†ç é”™è¯¯ï¼');
      }
    }

    // ç®¡ç†å‘˜é€€å‡ºç™»å½•
    function adminLogout() {
      appData.adminLoggedIn = false;
      document.getElementById('adminPanel').classList.add('hidden');
      document.getElementById('codeInputPage').classList.remove('hidden');
    }

    // ç”Ÿæˆæµ‹è¯•ç 
    function generateTestCode() {
      const code = Math.floor(100000 + Math.random() * 900000).toString();
      appData.validCodes.push(code);
      
      const codeDisplay = document.getElementById('newCodeDisplay');
      codeDisplay.innerHTML = `
        <div class="text-primary">æ–°æµ‹è¯•ç ç”ŸæˆæˆåŠŸï¼</div>
        <div class="text-2xl font-bold my-2">${code}</div>
        <div class="text-sm text-dark/70">å¯é‡å¤æŸ¥çœ‹æµ‹è¯•ç»“æœ</div>
      `;
      
      updateCodeRecords();
    }

    // æ›´æ–°æµ‹è¯•ç è®°å½•
    function updateCodeRecords() {
      const recordsEl = document.getElementById('codeRecords');
      
      if (appData.validCodes.length === 0 && appData.usedCodes.length === 0 && appData.tempUsedCodes.length === 0) {
        recordsEl.innerHTML = '<p class="text-center text-gray-500">æš‚æ— è®°å½•</p>';
        return;
      }
      
      let html = '<div class="space-y-4">';
      
      if (appData.validCodes.length > 0) {
        html += '<div>';
        html += '<h4 class="font-bold text-green-600 mb-2">æœ‰æ•ˆæµ‹è¯•ç ï¼š</h4>';
        html += '<div class="flex flex-wrap gap-2">';
        appData.validCodes.forEach(code => {
          html += `<span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">${code}</span>`;
        });
        html += '</div></div>';
      }
      
      if (appData.tempUsedCodes.length > 0) {
        html += '<div>';
        html += '<h4 class="font-bold text-yellow-600 mb-2">æµ‹è¯•ä¸­æµ‹è¯•ç ï¼š</h4>';
        html += '<div class="flex flex-wrap gap-2">';
        appData.tempUsedCodes.forEach(item => {
          html += `<span class="bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm">${item.code} (${item.time})</span>`;
        });
        html += '</div></div>';
      }
      
      if (appData.usedCodes.length > 0) {
        html += '<div>';
        html += '<h4 class="font-bold text-blue-600 mb-2">å·²å®Œæˆæµ‹è¯•ç ï¼š</h4>';
        html += '<div class="flex flex-wrap gap-2">';
        appData.usedCodes.forEach(item => {
          html += `<span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">${item.code} (${item.time})</span>`;
        });
        html += '</div></div>';
      }
      
      html += '</div>';
      recordsEl.innerHTML = html;
    }

    // æ›´æ–°æµ‹è¯•ç»“æœè®°å½•
    function updateResultRecords() {
      const tableBody = document.getElementById('resultTableBody');
      
      if (appData.testResults.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="4" class="p-4 text-center text-gray-500">æš‚æ— æµ‹è¯•ç»“æœ</td></tr>';
        return;
      }
      
      let html = '';
      appData.testResults.forEach(result => {
        html += `
          <tr class="hover:bg-secondary/20">
            <td class="p-3 border border-secondary">${result.code}</td>
            <td class="p-3 border border-secondary">${result.time}</td>
            <td class="p-3 border border-secondary">${result.catType.name}</td>
            <td class="p-3 border border-secondary">
              <button onclick="viewAnswers('${result.code}')" class="text-primary hover:underline">æŸ¥çœ‹</button>
            </td>
          </tr>
        `;
      });
      
      tableBody.innerHTML = html;
    }

    // æŸ¥çœ‹ç­”æ¡ˆè¯¦æƒ…
    window.viewAnswers = function(code) {
      const result = appData.testResults.find(item => item.code === code);
      if (!result) return;
      
      let answersHtml = '<div class="space-y-4">';
      result.answers.forEach((answer, index) => {
        answersHtml += `
          <div class="p-3 bg-light rounded-lg border border-secondary/30">
            <p class="font-bold">ç¬¬${index+1}é¢˜ï¼š${answer.questionText}</p>
            <p class="text-primary">é€‰æ‹©ï¼š${answer.text} (åˆ†æ•°åå·®ï¼š${answer.score})</p>
          </div>
        `;
      });
      answersHtml += '</div>';
      
      const tempModal = document.createElement('div');
      tempModal.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
      tempModal.innerHTML = `
        <div class="card-cute w-full max-w-lg max-h-[80vh] overflow-auto">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl text-primary font-bold">ç­”æ¡ˆè¯¦æƒ… (${code})</h3>
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-dark hover:text-red-500">
              <i class="fa fa-times text-xl"></i>
            </button>
          </div>
          <div class="mb-4 text-center">
            <img src="${result.catType.img}" alt="${result.catType.name}" class="mx-auto cat-img-circle-sm mb-2 rotate-cat">
            <p class="font-bold">åˆ†æ•°åå·®ï¼š${result.totalScore}</p>
            <p class="font-bold text-primary">æ€§æ ¼ç±»å‹ï¼š${result.catType.name}</p>
            <p>${result.catType.desc}</p>
          </div>
          ${answersHtml}
        </div>
      `;
      document.body.appendChild(tempModal);
    };

    // éªŒè¯æµ‹è¯•ç 
    function validateTestCode() {
      const inputCode = document.getElementById('testCodeInput').value.trim();
      const errorEl = document.getElementById('codeError');
      
      errorEl.classList.add('hidden');
      
      if (!inputCode || inputCode.length !== 6) {
        errorEl.textContent = 'è¯·è¾“å…¥6ä½æµ‹è¯•ç ';
        errorEl.classList.remove('hidden');
        return;
      }
      
      // æ£€æŸ¥å†å²ç»“æœ
      const historyResult = appData.testResults.find(item => item.code === inputCode);
      if (historyResult) {
        showHistoryResult(historyResult);
        return;
      }
      
      // æ£€æŸ¥æµ‹è¯•ç æœ‰æ•ˆæ€§
      const codeIndex = appData.validCodes.indexOf(inputCode);
      const tempIndex = appData.tempUsedCodes.findIndex(item => item.code === inputCode);
      
      if (codeIndex === -1 && tempIndex === -1) {
        errorEl.textContent = 'æµ‹è¯•ç æ— æ•ˆ';
        errorEl.classList.remove('hidden');
        return;
      }
      
      // åˆå§‹åŒ–æµ‹è¯•çŠ¶æ€
      appData.currentCode = inputCode;
      appData.currentQuestionKey = "init";
      appData.questionPath = [];
      appData.userAnswers = [];
      appData.totalScore = 0;
      
      if (codeIndex !== -1) {
        appData.validCodes.splice(codeIndex, 1);
        appData.tempUsedCodes.push({
          code: inputCode,
          time: new Date().toLocaleString()
        });
      }
      
      if (appData.adminLoggedIn) {
        updateCodeRecords();
      }
      
      // æ˜¾ç¤ºé¢˜ç›®é¡µé¢
      document.getElementById('codeInputPage').classList.add('hidden');
      document.getElementById('questionPage').classList.remove('hidden');
      
      // åŠ è½½åˆå§‹é—®é¢˜
      loadBranchQuestion(appData.currentQuestionKey);
    }

    // åŠ è½½åˆ†æ”¯é—®é¢˜
    function loadBranchQuestion(questionKey) {
      const question = appData.branchQuestions[questionKey];
      const questionContent = document.getElementById('questionContent');
      const optionsContainer = document.getElementById('optionsContainer');
      const questionNum = document.getElementById('questionNum');
      const prevBtn = document.getElementById('prevQuestion');
      const nextBtn = document.getElementById('nextQuestion');
      
      // æ›´æ–°é¢˜ç›®ç¼–å·
      questionNum.textContent = `ç¬¬${question.id}é¢˜ / å…±10é¢˜`;
      
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      prevBtn.disabled = appData.questionPath.length === 0;
      nextBtn.textContent = question.id === 10 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€é¢˜';
      
      // åŠ è½½é¢˜ç›®å†…å®¹
      questionContent.textContent = question.text;
      
      // åŠ è½½é€‰é¡¹
      optionsContainer.innerHTML = '';
      question.options.forEach((option, optIndex) => {
        const optionEl = document.createElement('div');
        // æ£€æŸ¥æ˜¯å¦å·²æœ‰ç­”æ¡ˆ
        const hasAnswer = appData.userAnswers.some(ans => ans.questionId === question.id);
        const isSelected = hasAnswer && appData.userAnswers.find(ans => ans.questionId === question.id).optionIndex === optIndex;
        
        optionEl.className = `p-4 border-2 rounded-xl cursor-pointer transition-all duration-200 ${isSelected ? 'border-primary bg-primary/10' : 'border-secondary hover:border-primary/50'}`;
        optionEl.innerHTML = `
          <label class="cursor-pointer block text-center">
            <input type="radio" name="questionOption" class="hidden" value="${optIndex}" ${isSelected ? 'checked' : ''}>
            <span class="text-lg">${option.text}</span>
          </label>
        `;
        
        // é€‰é¡¹ç‚¹å‡»äº‹ä»¶
        optionEl.addEventListener('click', function() {
          // å–æ¶ˆå…¶ä»–é€‰é¡¹é€‰ä¸­çŠ¶æ€
          const allOptions = optionsContainer.querySelectorAll('div');
          allOptions.forEach(el => {
            el.classList.remove('border-primary', 'bg-primary/10');
            el.classList.add('border-secondary');
          });
          
          // è®¾ç½®å½“å‰é€‰é¡¹é€‰ä¸­çŠ¶æ€
          this.classList.remove('border-secondary');
          this.classList.add('border-primary', 'bg-primary/10');
          
          // ä¿å­˜ç­”æ¡ˆ
          saveBranchAnswer(question, option, optIndex);
        });
        
        optionsContainer.appendChild(optionEl);
      });
    }

    // ä¿å­˜åˆ†æ”¯ç­”æ¡ˆ
    function saveBranchAnswer(question, option, optIndex) {
      // æ£€æŸ¥æ˜¯å¦å·²æœ‰è¯¥é¢˜ç­”æ¡ˆï¼Œæœ‰åˆ™æ›´æ–°
      const answerIndex = appData.userAnswers.findIndex(ans => ans.questionId === question.id);
      
      const answerData = {
        questionId: question.id,
        questionKey: appData.currentQuestionKey,
        questionText: question.text,
        optionIndex: optIndex,
        text: option.text,
        score: option.score,
        nextQuestionKey: option.next
      };
      
      if (answerIndex !== -1) {
        appData.userAnswers[answerIndex] = answerData;
      } else {
        appData.userAnswers.push(answerData);
      }
      
      // æ›´æ–°æ€»åˆ†
      calculateTotalScore();
    }

    // è®¡ç®—åˆ†æ•°åå·®
    function calculateTotalScore() {
      appData.totalScore = appData.userAnswers.reduce((sum, answer) => {
        return sum + answer.score;
      }, 0);
    }

    // ä¸Šä¸€é¢˜ï¼ˆåˆ†æ”¯ç‰ˆæœ¬ï¼‰
    function goToPrevQuestion() {
      if (appData.questionPath.length === 0) return;
      
      // ç§»é™¤å½“å‰è·¯å¾„
      appData.questionPath.pop();
      
      // è·å–ä¸Šä¸€é¢˜key
      appData.currentQuestionKey = appData.questionPath.length > 0 ? appData.questionPath[appData.questionPath.length - 1] : "init";
      
      // åŠ è½½ä¸Šä¸€é¢˜
      loadBranchQuestion(appData.currentQuestionKey);
    }

    // ä¸‹ä¸€é¢˜ï¼ˆåˆ†æ”¯ç‰ˆæœ¬ï¼‰
    function goToNextQuestion() {
      const currentQuestion = appData.branchQuestions[appData.currentQuestionKey];
      const currentAnswer = appData.userAnswers.find(ans => ans.questionId === currentQuestion.id);
      
      // æ£€æŸ¥æ˜¯å¦å·²é€‰æ‹©ç­”æ¡ˆ
      if (!currentAnswer) {
        alert('è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ç»§ç»­');
        return;
      }
      
      // æœ€åä¸€é¢˜ï¼Œæ˜¾ç¤ºç»“æœ
      if (currentQuestion.id === 10) {
        showTestResult();
        return;
      }
      
      // è®°å½•å½“å‰è·¯å¾„
      appData.questionPath.push(appData.currentQuestionKey);
      
      // è·å–ä¸‹ä¸€é¢˜key
      appData.currentQuestionKey = currentAnswer.nextQuestionKey;
      
      // åŠ è½½ä¸‹ä¸€é¢˜
      loadBranchQuestion(appData.currentQuestionKey);
    }

    // æ˜¾ç¤ºå†å²æµ‹è¯•ç»“æœ
    function showHistoryResult(historyResult) {
      document.getElementById('codeInputPage').classList.add('hidden');
      document.getElementById('questionPage').classList.add('hidden');
      document.getElementById('resultPage').classList.remove('hidden');
      
      const resultContent = document.getElementById('resultContent');
      resultContent.innerHTML = `
        <div class="mb-6">
          <div class="inline-block bg-accent/20 px-4 py-2 rounded-full text-sm mb-4">
            <i class="fa fa-history mr-2"></i>å†å²æµ‹è¯•ç»“æœ
          </div>
          <!-- åœ†å½¢å›¾ç‰‡æ˜¾ç¤º -->
          <img src="${historyResult.catType.img}" alt="${historyResult.catType.name}" class="mx-auto cat-img-circle mb-4 rotate-cat">
          <h2 class="text-3xl text-primary font-bold mb-2">ä½ æ˜¯${historyResult.catType.name}ï¼</h2>
          <div class="inline-block bg-secondary/30 px-4 py-1 rounded-full text-sm mb-4">
            åˆ†æ•°åå·®ï¼š${historyResult.totalScore}åˆ†
          </div>
          <div class="text-sm text-dark/60 mb-2">
            æµ‹è¯•æ—¶é—´ï¼š${historyResult.time}
          </div>
        </div>
        <p class="text-lg mb-6 leading-relaxed">${historyResult.catType.desc}</p>
        <div class="p-4 bg-primary/10 rounded-xl mb-6">
          <p class="font-bold text-center mb-2">ğŸ± æ€§æ ¼å°ç‰¹ç‚¹</p>
          <ul class="text-left space-y-2">
            ${getPersonalityTraits(historyResult.catType.name).map(trait => `<li><i class="fa fa-star text-primary mr-2"></i>${trait}</li>`).join('')}
          </ul>
        </div>
        <div class="mt-4 text-sm text-primary font-medium">
          <p>âœ¨ å¯é‡å¤è¾“å…¥æµ‹è¯•ç æŸ¥çœ‹æ­¤ç»“æœ</p>
        </div>
      `;
    }

    // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
    function showTestResult() {
      document.getElementById('questionPage').classList.add('hidden');
      document.getElementById('resultPage').classList.remove('hidden');
      
      // ç¡®å®šçŒ«ç³»æ€§æ ¼ç±»å‹
      let catType = appData.catTypes[0];
      for (const type of appData.catTypes) {
        if (appData.totalScore >= type.min && appData.totalScore <= type.max) {
          catType = type;
          break;
        }
      }
      
      // æ›´æ–°æµ‹è¯•ç çŠ¶æ€
      const tempIndex = appData.tempUsedCodes.findIndex(item => item.code === appData.currentCode);
      if (tempIndex !== -1) {
        const tempCode = appData.tempUsedCodes.splice(tempIndex, 1)[0];
        appData.usedCodes.push(tempCode);
      }
      
      // ä¿å­˜æµ‹è¯•ç»“æœ
      const resultIndex = appData.testResults.findIndex(item => item.code === appData.currentCode);
      const resultRecord = {
        code: appData.currentCode,
        time: new Date().toLocaleString(),
        totalScore: appData.totalScore,
        catType: catType,
        answers: appData.userAnswers.map(ans => ({
          questionId: ans.questionId,
          questionText: ans.questionText,
          optionIndex: ans.optionIndex,
          text: ans.text,
          score: ans.score
        }))
      };

      if (resultIndex !== -1) {
        appData.testResults[resultIndex] = resultRecord;
      } else {
        appData.testResults.push(resultRecord);
      }

      // æ›´æ–°ç®¡ç†å‘˜é¢æ¿è®°å½•
      if (appData.adminLoggedIn) {
        updateCodeRecords();
        updateResultRecords();
      }

      // æ¸²æŸ“ç»“æœé¡µé¢
      const resultContent = document.getElementById('resultContent');
      resultContent.innerHTML = `
        <div class="mb-6">
          <div class="inline-block bg-accent/20 px-4 py-2 rounded-full text-sm mb-4">
            <i class="fa fa-certificate mr-2"></i>æµ‹è¯•å®Œæˆï¼
          </div>
          <!-- åœ†å½¢çŒ«å’ªå›¾ç‰‡æ ¸å¿ƒå±•ç¤º -->
          <img src="${catType.img}" alt="${catType.name}" class="mx-auto cat-img-circle mb-4 rotate-cat">
          <h2 class="text-3xl text-primary font-bold mb-2">ä½ æ˜¯${catType.name}ï¼</h2>
          <div class="inline-block bg-secondary/30 px-4 py-1 rounded-full text-sm mb-4">
            åˆ†æ•°åå·®ï¼š${appData.totalScore}åˆ†
          </div>
        </div>
        <p class="text-lg mb-6 leading-relaxed">${catType.desc}</p>
        <div class="p-4 bg-primary/10 rounded-xl mb-6">
          <p class="font-bold text-center mb-2">ğŸ± æ€§æ ¼å°ç‰¹ç‚¹</p>
          <ul class="text-left space-y-2">
            ${getPersonalityTraits(catType.name).map(trait => `<li><i class="fa fa-star text-primary mr-2"></i>${trait}</li>`).join('')}
          </ul>
        </div>
        <div class="mt-4 text-sm text-primary font-medium">
          <p>âœ¨ ä¿å­˜æµ‹è¯•ç ã€${appData.currentCode}ã€‘å¯é‡å¤æŸ¥çœ‹ç»“æœ</p>
        </div>
      `;
    }

    // è·å–å¯¹åº”çŒ«ç³»æ€§æ ¼çš„ç‰¹ç‚¹
    function getPersonalityTraits(catTypeName) {
      const traitsMap = {
        "æ…µæ‡’å®…çŒ«": ["äº«å—ç‹¬å¤„æ—¶å…‰", "å¯¹ç†Ÿæ‚‰ç¯å¢ƒæœ‰å®‰å…¨æ„Ÿ", "æ…¢çƒ­å‹äººæ ¼", "å†…å¿ƒæŸ”è½¯ç»†è…»"],
        "å‚²å¨‡ç³ç‘çŒ«": ["å£æ˜¯å¿ƒéçš„å¯çˆ±", "å¤–å†·å†…çƒ­", "æœ‰è‡ªå·±çš„å°è„¾æ°”", "é‡æ„Ÿæƒ…ä½†ä¸å¤–éœ²"],
        "æ¸©æŸ”å¸ƒå¶çŒ«": ["å–„è§£äººæ„", "è‡ªå¸¦æ²»æ„ˆå±æ€§", "æ„¿æ„å€¾å¬ä»–äºº", "äº²å’ŒåŠ›æ»¡åˆ†"],
        "æ´»æ³¼æ©˜çŒ«": ["ä¹è§‚å¼€æœ—", "è‡ªå¸¦å¹½é»˜æ„Ÿ", "ç¤¾äº¤å°è¾¾äºº", "å¯¹ç”Ÿæ´»å……æ»¡çƒ­æƒ…"],
        "å¥½å¥‡è‹±çŸ­çŒ«": ["å†·é™ç†æ™º", "å¥½å¥‡å¿ƒå¼º", "åšäº‹ç¨³é‡", "é»˜é»˜è§‚å¯Ÿä¸€åˆ‡"],
        "ç²˜äººåŠ è²çŒ«": ["ç¼ºä¹å®‰å…¨æ„Ÿ", "å–œæ¬¢é™ªä¼´", "æ¸©æŸ”ç²˜äºº", "å®³æ€•å­¤ç‹¬"],
        "ç‹¬ç«‹æš¹ç½—çŒ«": ["æœ‰ä¸»è§æœ‰æƒ³æ³•", "ä¸è½»æ˜“å¦¥å", "è‡ªå°Šå¿ƒå¼º", "è®¤å®šçš„äººä¼šçœŸå¿ƒå¯¹å¾…"],
        "è°ƒçš®ç¾çŸ­çŒ«": ["ç²¾åŠ›æ—ºç››", "å–œæ¬¢æ–°é²œæ„Ÿ", "è‡ªå¸¦æ¶ä½œå‰§å¤©èµ‹", "æ°”æ°›åˆ¶é€ è€…"],
        "ä¼˜é›…æ³¢æ–¯çŒ«": ["æ³¨é‡ç»†èŠ‚", "æœ‰ç”Ÿæ´»å“å‘³", "ä¸æ…Œä¸å¿™", "è‡ªå¸¦é«˜è´µæ°”è´¨"],
        "å…ƒæ°”æ›¼åŸºåº·": ["æ°¸è¿œå……æ»¡æ´»åŠ›", "æ­£èƒ½é‡æ»¡æ»¡", "è¡ŒåŠ¨åŠ›å¼º", "èº«è¾¹äººçš„å°å¤ªé˜³"]
      };
      return traitsMap[catTypeName] || ["ç‹¬ç‰¹çš„ä½ ï¼Œæ‹¥æœ‰ä¸“å±çš„çŒ«å’ªäººæ ¼ï½"];
    }

    // åˆ†äº«ç»“æœ
    function shareResult(type) {
      // ç”Ÿæˆåˆ†äº«å›¾ç‰‡
      html2canvas(document.getElementById('resultContent'), {
        scale: 2,
        useCORS: true,
        backgroundColor: '#FFF9E8'
      }).then(canvas => {
        const shareModal = document.getElementById('shareImageModal');
        const imageContainer = document.getElementById('shareImageContainer');
        
        imageContainer.innerHTML = '';
        imageContainer.appendChild(canvas);
        
        shareModal.classList.remove('hidden');
        
        // æ¨¡æ‹Ÿåˆ†äº«é€»è¾‘
        if (type === 'wechat') {
          alert('å·²ç”Ÿæˆåˆ†äº«å›¾ç‰‡ï¼Œå¯ä¿å­˜ååˆ†äº«åˆ°å¾®ä¿¡ï½');
        } else if (type === 'qq') {
          alert('å·²ç”Ÿæˆåˆ†äº«å›¾ç‰‡ï¼Œå¯ä¿å­˜ååˆ†äº«åˆ°QQï½');
        }
      });
    }

    // ä¿å­˜ç»“æœå›¾ç‰‡
    function saveResultImage() {
      html2canvas(document.getElementById('resultContent'), {
        scale: 2,
        useCORS: true,
        backgroundColor: '#FFF9E8'
      }).then(canvas => {
        const link = document.createElement('a');
        link.download = `æˆ‘çš„çŒ«ç³»æ€§æ ¼-${appData.currentCode}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();
        
        // æç¤ºä¿å­˜æˆåŠŸ
        alert('å›¾ç‰‡ä¿å­˜æˆåŠŸï¼å¯åœ¨ç›¸å†Œ/ä¸‹è½½æ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹ï½');
      });
    }

    // å…³é—­åˆ†äº«å¼¹çª—
    function closeShareModal() {
      document.getElementById('shareImageModal').classList.add('hidden');
    }
  </script>
</body>

</html>
